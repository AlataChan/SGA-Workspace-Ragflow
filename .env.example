# ===========================================
# 🔐 企业AI工作空间 - 环境变量配置模板
# ===========================================
# 
# 使用说明：
# 1. 复制此文件为 .env
# 2. 修改所有包含 "change-this" 的值
# 3. 确保所有密钥都是唯一且安全的
#
# ⚠️ 重要：生产环境请务必修改所有默认密钥！
# ===========================================

# ===========================================
# 应用基础配置
# ===========================================
NODE_ENV=development
NEXT_PUBLIC_APP_NAME=企业AI工作空间
NEXT_PUBLIC_APP_VERSION=1.0.0
NEXT_PUBLIC_APP_URL=http://localhost:8100
NEXT_TELEMETRY_DISABLED=1

# ===========================================
# 安全密钥 (⚠️ 生产环境请务必修改)
# ===========================================
# JWT密钥 - 用于用户认证令牌签名
JWT_SECRET=your-jwt-secret-change-this-in-production

# Cookie安全设置
# 设置为 true 时，Cookie 只通过 HTTPS 传输
# 设置为 false 时，允许 HTTP 传输（内网/测试环境）
# 不设置时，根据 NODE_ENV 自动判断（production=true）
# COOKIE_SECURE=false

# 数据加密密钥 - 必须是32字符
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef

# NextAuth密钥 - 用于会话加密
NEXTAUTH_SECRET=your-nextauth-secret-change-this

# CSRF保护密钥
CSRF_SECRET=your-csrf-secret-change-this

# ===========================================
# 数据库配置
# ===========================================
# PostgreSQL数据库配置
POSTGRES_DB=sga_workspace
POSTGRES_USER=sga_user
POSTGRES_PASSWORD=change-this-password

# 数据库连接URL
DATABASE_URL=postgresql://sga_user:change-this-password@postgres:5432/sga_workspace

# 数据库连接池配置
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# ===========================================
# Redis缓存配置
# ===========================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=change-this-redis-password
REDIS_DB=0

# ===========================================
# 文件存储配置 (MinIO)
# ===========================================
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=change-this-minio-secret
MINIO_BUCKET=sga-workspace

# 文件上传配置
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/webp,image/gif,application/pdf
NEXT_PUBLIC_UPLOAD_ENDPOINT=/api/upload

# ===========================================
# 业务配置
# ===========================================
# 默认公司信息
DEFAULT_COMPANY_NAME=示例企业

# 默认管理员账户 (首次初始化使用)
DEFAULT_ADMIN_EMAIL=admin@example.com
DEFAULT_ADMIN_PASSWORD=change-this-admin-password

# Dify AI平台配置
DEFAULT_DIFY_BASE_URL=http://your-dify-server/v1
DEFAULT_DIFY_TIMEOUT=180000
DIFY_MAX_RETRIES=3

# ===========================================
# 功能开关
# ===========================================
ENABLE_USER_REGISTRATION=false
ENABLE_PASSWORD_RESET=true
ENABLE_MULTI_COMPANY=false
ENABLE_FILE_UPLOAD=true
ENABLE_CHAT_HISTORY=true
ENABLE_ADMIN_PANEL=true

# ===========================================
# API配置
# ===========================================
API_RATE_LIMIT_REQUESTS=100
API_RATE_LIMIT_WINDOW=900000
API_TIMEOUT=30000

# ===========================================
# 日志配置
# ===========================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/app.log

# ===========================================
# 监控配置
# ===========================================
HEALTH_CHECK_ENDPOINT=/api/health
METRICS_ENDPOINT=/api/metrics
ENABLE_METRICS=true

# ===========================================
# 邮件配置 (可选)
# ===========================================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=

# ===========================================
# 监控服务配置 (可选)
# ===========================================
GRAFANA_PASSWORD=change-this-grafana-password
PROMETHEUS_RETENTION=15d

# ===========================================
# 聊天历史配置
# ===========================================
MAX_CHAT_HISTORY_DAYS=90
MAX_SESSIONS_PER_USER=50
CLEANUP_INTERVAL_HOURS=24

# ===========================================
# 开发配置
# ===========================================
NEXT_PUBLIC_DEBUG=false
ENABLE_API_DOCS=false
